<view class="result-page">
  
  <!-- åœºæ™¯1ï¼šè€è™æœº & åˆ†æè¿‡ç¨‹ (Loadingæ€) -->
  <view class="loading-wrapper" wx:if="{{isLoading}}">
    
    <!-- è€è™æœºä¸»ä½“ -->
    <view class="slot-machine-wrapper">
      
      <!-- å³ä¾§åŠ¨æ€æ‹‰æ† -->
      <view class="lever-container">
        <view class="lever-base"></view>
        <view class="lever-stick {{leverPulled ? 'pulled' : ''}}">
          <view class="lever-ball"></view>
        </view>
      </view>

      <!-- âœ¨ ä¿®æ”¹ï¼šä½¿ç”¨å›¾ç‰‡ä½œä¸ºæœºèº«èƒŒæ™¯ -->
      <view class="machine-body-image-wrapper">
        <!-- è¿™é‡Œçš„ src æ¢æˆä½ çš„è€è™æœºå›¾ç‰‡è·¯å¾„ï¼Œä¾‹å¦‚ /assets/slot_machine_bg.png -->
        <!-- å¦‚æœæ²¡æœ‰æœ¬åœ°å›¾ç‰‡ï¼Œæš‚æ—¶ç”¨ CSS æ¨¡æ‹Ÿæˆ–è€…ç½‘ç»œå›¾ç‰‡å ä½ -->
        <!-- è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å¯çˆ±çš„è€è™æœºèƒŒæ™¯å›¾å ä½ -->
        <image class="machine-bg-img" src="https://img.icons8.com/color/480/slot-machine.png" mode="widthFix"></image>
        
        <!-- å±å¹•çª—å£ (å®šä½åœ¨å›¾ç‰‡ä¸­é—´çš„æ˜¾ç¤ºåŒºåŸŸ) -->
        <!-- æ³¨æ„ï¼šä½ éœ€è¦æ ¹æ®å›¾ç‰‡çš„å®é™…ç•™ç™½ä½ç½®è°ƒæ•´ top/left/width/height -->
        <view class="screen-frame-overlay">
          <view class="reel-container">
            
            <!-- æ»šè½® 1 -->
            <view class="reel">
              <view class="reel-inner {{spinning ? 'spinning' : 'stopped'}}" style="animation-duration: 0.6s">
                <block wx:for="{{reel1}}" wx:key="index">
                  <view class="reel-item">{{item}}</view>
                </block>
              </view>
            </view>

            <!-- æ»šè½® 2 -->
            <view class="reel">
              <view class="reel-inner {{spinning ? 'spinning' : 'stopped'}}" style="animation-duration: 0.9s">
                <block wx:for="{{reel2}}" wx:key="index">
                  <view class="reel-item">{{item}}</view>
                </block>
              </view>
            </view>

            <!-- æ»šè½® 3 -->
            <view class="reel">
              <view class="reel-inner {{spinning ? 'spinning' : 'stopped'}}" style="animation-duration: 0.75s">
                <block wx:for="{{reel3}}" wx:key="index">
                  <view class="reel-item">{{item}}</view>
                </block>
              </view>
            </view>

            <!-- åå…‰ä¸ä¸­å¥–çº¿ -->
            <view class="glass-glare"></view>
            <view class="win-line"></view>
          </view>
        </view>
        
      </view>
    </view>

    <!-- åˆ†ææ°”æ³¡å¡ç‰‡ (å¤šå·´èƒºé£æ ¼) -->
    <view class="analysis-card">
      <view class="card-header">
        <text class="emoji-icon">ğŸ¤–</text>
        <text class="header-title">çµæ„Ÿåˆ†æä¸­...</text>
      </view>
      <scroll-view scroll-y class="card-body" scroll-top="{{scrollTop}}" scroll-with-animation>
        <block wx:for="{{analysisLogs}}" wx:key="index">
          <view class="log-bubble">
            <!-- æ ¹æ®ç±»å‹æ˜¾ç¤ºå›¾æ ‡ -->
            <text wx:if="{{item.type==='relation'}}">ğŸ’</text>
            <text wx:elif="{{item.type==='weather'}}">ğŸŒ¦ï¸</text>
            <text wx:elif="{{item.type==='budget'}}">ğŸ’°</text>
            <text wx:else>âœ¨</text>
            <text>{{item.text}}</text>
          </view>
        </block>
      </scroll-view>
    </view>

  </view>

  <!-- åœºæ™¯2ï¼šå‡ºç¥¨ç»“æœ (Resultæ€) -->
  <view class="receipt-scene {{showReceipt ? 'enter' : ''}}" wx:else>
    
    <view class="receipt-paper">
      <view class="sawtooth-top"></view>
      
      <view class="receipt-body">
        <view class="r-header">
          <text class="r-title">å¿ƒåŠ¨å°ç¥¨</text>
          <text class="r-date">{{result.date || 'Today'}}</text>
        </view>
        <view class="r-divider">--------------------------------</view>
        
        <view class="r-main">
          <text class="plan-name">{{result.title}}</text>
          <view class="stars">â¤â¤â¤â¤â¤</view>
        </view>
        
        <view class="r-kv">
          <view class="kv-row">
            <text class="k">ğŸ“ åœ°ç‚¹</text>
            <text class="v">{{result.location}}</text>
          </view>
          <view class="kv-row activity-row">
            <text class="k">ğŸ¡ ç©æ³•</text>
            <text class="v highlight">{{result.activity}}</text>
          </view>
        </view>
        
        <view class="r-box">
          <text class="box-label">ğŸ’¡ æ¨èç†ç”±</text>
          <text class="box-content">{{result.reason}}</text>
        </view>
        
        <view class="r-tags">
          <block wx:for="{{result.tags}}" wx:key="*this">
            <text class="r-tag">#{{item}}</text>
          </block>
        </view>
        
        <view class="r-divider">--------------------------------</view>
        <view class="r-footer">
          <text class="barcode">|| | ||| || || | |||</text>
          <text>Keep Loving</text>
        </view>
      </view>
      
      <view class="sawtooth-bottom"></view>
    </view>

    <!-- åº•éƒ¨æ“ä½œåŒº -->
    <view class="action-dock">
      <button class="handle-btn reroll" bindtap="reRoll" hover-class="hover-btn">
        <text>ğŸ•¹ï¸ ä¸æ»¡æ„ï¼Ÿé‡è¯•</text>
      </button>
      <button class="handle-btn share" open-type="share" hover-class="hover-btn">
        <text>ğŸ“¤ åˆ†äº«ç»™Ta</text>
      </button>
    </view>
  </view>
</view>